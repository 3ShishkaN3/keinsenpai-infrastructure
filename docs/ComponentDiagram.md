# Диаграмма компонентов

![Диаграмма компонентов](ComponentDiagram.svg)

## Описание
Диаграмма компонентов показывает архитектуру микросервисной платформы **Keisenpai**. Основные элементы системы включают клиентские приложения, API слой, основные и вспомогательные сервисы, а также инфраструктурные компоненты для управления данными и кэшированием. Для редактирования диаграммы см. [Код диаграммы компонентов](docs/ComponentDiagram.txt). Диаграмма создавалась на платформе [PlantUML](https://www.plantuml.com/).

### Ключевые компоненты

#### 1. **Клиенты**
- **Веб-клиент**: Основное приложение для доступа к платформе через браузер.
- **Мобильный клиент**: Версия для мобильных устройств, взаимодействует с API через HTTPS.
- **Административная панель**: Панель управления для администраторов и модераторов системы.

#### 2. **API слой**
- **API Шлюз**: Центральная точка входа для всех клиентских запросов. Маршрутизирует запросы к нужным сервисам.
- **Сервис авторизации**: Обрабатывает авторизацию и аутентификацию пользователей, генерирует и проверяет JWT токены.

#### 3. **Основные сервисы**
- **Сервис пользователей**: Управляет данными пользователей, включая их профили, настройки и прогресс.
- **Сервис курсов**: Управляет курсами, их содержанием и структурой.
- **Сервис уроков**: Обрабатывает информацию по конкретным урокам в рамках курсов.
- **Сервис материалов**: Управляет учебными материалами, включая видео, аудио и текстовые файлы.
- **Сервис тестирования**: Отвечает за проведение тестов и проверку результатов.
- **Сервис прогресса**: Отслеживает прогресс пользователя по курсам, тестам и урокам.
- **Сервис платежей**: Обрабатывает финансовые транзакции, связанные с покупками курсов.
- **Сервис достижений**: Управляет системой наград и достижений.

#### 4. **Вспомогательные сервисы**
- **Сервис уведомлений**: Обрабатывает уведомления и отправляет их клиентам через WebSocket.
- **Сервис аналитики**: Собирает и анализирует статистические данные для улучшения работы платформы.
- **Сервис поиска**: Обеспечивает поиск по курсам, урокам и материалам.

#### 5. **Хранилища**
- **Базы данных**: Используются для хранения данных пользователей, курсов и тестов.
- **Файловое хранилище**: Для хранения медиафайлов, таких как видео и изображения.
- **Видео CDN**: Используется для быстрого доступа к мультимедийному контенту.

#### 6. **Инфраструктура**
- **Очередь сообщений**: Используется для обработки асинхронных задач, таких как обновление достижений или отправка уведомлений.
- **Redis Cache**: Кэш для временного хранения данных с целью ускорения доступа.

## Связи между компонентами
- Клиенты общаются с API Шлюзом по HTTPS.
- Основные сервисы взаимодействуют друг с другом и с хранилищами через REST/gRPC и SQL интерфейсы.
- Вспомогательные сервисы работают с основными через события, обрабатываемые в очереди сообщений.
- Медиафайлы доступны через S3 API и CDN API для ускорения загрузки.
